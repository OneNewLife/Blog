<!DOCTYPE html> <html lang="pt-br"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title> 【译】怎样用 Tar 和 OpenSSL 给文件和目录加密及解密 &bull; Mars Blog </title> <meta name="description" content="当你有重要的敏感数据的时候，给你的文件和目录额外加一层保护是至关重要的，特别是当你需要通过网络与他人传输数据的时候。"> <link rel="stylesheet" href="/css/main.css"> <link rel="canonical" href="https://mars.js.org/how-to-encrypt-and-decrypt-files-and-directories-using-tar-and-openssl/"> <link rel="alternate" type="application/rss+xml" title="Mars Blog" href="https://mars.js.org/feed.xml" /> </head> <body class="single"> <main class="main"> <header class="header"> <div class="overlay"> <div style="padding: 0 1em;"> <h1 class="title"> <a href="/">Mars Blog</a> </h1> <nav class="navbar"> <a href="#" class="menu-icon"> <span></span> <span></span> <span></span> </a> <ul class="nav"> <li><a href="/">Home</a></li> <li><a href="/archive.html">Archive</a></li> </ul> </nav> </div> </div> </header> <article class="post container card"> <header class="post-header"> <h1 class="post-title">【译】怎样用 Tar 和 OpenSSL 给文件和目录加密及解密</h1> <span class="post-meta"> <time class="post-date" datetime="2016-11-05">Nov 5, 2016</time> <span class="post-author">by Mars Wong</span> </span> </header> <div class="post-content"> <p>当你有重要的敏感数据的时候，给你的文件和目录额外加一层保护是至关重要的，特别是当你需要通过网络与他人传输数据的时候。</p> <p>由于这个原因，我在寻找一个可疑在 Linux 上加密及解密文件和目录的实用程序，幸运的是我找到了一个用 tar（Linux 的一个压缩打包工具）和 OpenSSL 来解决的方案。借助这两个工具，你真的可以毫不费力地创建和加密 tar 归档文件。</p> <p>在这篇文章中，我们将了解如何使用 OpenSSL 创建和加密 tar 或 gz（gzip，另一种压缩文件）归档文件：</p> <p>牢记使用 OpenSSL 的常规方式是：</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># openssl command command-options arguments
</code></pre></div></div> <h3 id="在-linux-中加密文件">在 Linux 中加密文件</h3> <p>要加密当前工作目录的内容（根据文件的大小，这可能需要一点时间）：</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># tar -czf - * | openssl enc -e -aes256 -out secured.tar.gz
</code></pre></div></div> <p>上述命令的解释：</p> <ol> <li><code class="highlighter-rouge">enc</code> - openssl 命令使用加密进行编码</li> <li><code class="highlighter-rouge">-e</code> – 用来加密输入文件的 <code class="highlighter-rouge">enc</code> 命令选项，这里是指前一个 tar 命令的输出</li> <li><code class="highlighter-rouge">-aes256</code> – 加密用的算法</li> <li><code class="highlighter-rouge">-out</code> – 用于指定输出文件名的 <code class="highlighter-rouge">enc</code> 命令选项，这里文件名是 <code class="highlighter-rouge">secured.tar.gz</code></li> </ol> <h3 id="在-linux-中解密文件">在 Linux 中解密文件</h3> <p>要解密上述 tar 归档内容，使用以下命令。</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># openssl enc -d -aes256 -in secured.tar.gz | tar xz -C test
</code></pre></div></div> <p>上述命令的解释：</p> <ol> <li><code class="highlighter-rouge">-d</code> – 用于解密文件</li> <li><code class="highlighter-rouge">-C</code> – 提取内容到 <code class="highlighter-rouge">test</code> 子目录</li> </ol> <p>下图展示了加解密过程，以及当你尝试执行以下操作时会发生什么：</p> <ol> <li>以传统方式提取 tar 包的内容</li> <li>使用了错误的密码的时候</li> <li>当你输入正确的密码的时候</li> </ol> <p><a href="http://www.tecmint.com/wp-content/uploads/2016/08/Encrypt-Decrypt-Tar-Archive-Files-in-Linux.png"><img src="http://www.tecmint.com/wp-content/uploads/2016/08/Encrypt-Decrypt-Tar-Archive-Files-in-Linux.png" alt="在 Linux 中加密和解密 Tar 归档文件" /></a></p> <center>在 Linux 中加密和解密 Tar 归档文件</center> <p>当你在本地网络或因特网工作的时候，你可以随时通过加密来保护你和他人共享的重要文本或文件，这有助于降低将其暴露给恶意攻击者的风险。</p> <p>我们研究了一种使用 OpenSSL（一个 openssl 命令行工具）加密 tar 包的简单技术，你可以参考它的手册页（man page）来获取更多信息和有用的命令。</p> <h3 id="reference">Reference</h3> <ul> <li><a href="http://www.tecmint.com/encrypt-decrypt-files-tar-openssl-linux/">How to Encrypt and Decrypt Files and Directories Using Tar and OpenSSL</a></li> </ul> <aside class="share"> <span>Share this: </span> <a href="http://twitter.com/share?text=【译】怎样用 Tar 和 OpenSSL 给文件和目录加密及解密&amp;url=https://mars.js.org/how-to-encrypt-and-decrypt-files-and-directories-using-tar-and-openssl/&amp;hashtags=web,dev,blog,soudev&amp;via=nandomoreirame" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;"> <i class="fa fa-twitter-square"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?u=https://mars.js.org/how-to-encrypt-and-decrypt-files-and-directories-using-tar-and-openssl/" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;"> <i class="fa fa-facebook-square"></i> </a> </aside> </div> </article> <footer class="footer t-center"> <div class="container"> <div class="social-icons"> <ul class="text-left"> <li><a href="https://www.facebook.com/maaarswong" target="_blank"><i class="fa fa-facebook"></i></a></li> <li><a href="https://twitter.com/maaarswong" target="_blank"><i class="fa fa-twitter"></i></a></li> </ul> </div> <small> <a href=https://github.com/marswong target="_blank">Mars Wong</a> &copy; 2015 - 2020 All rights reserved. </small> <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"> <img alt="Creative Commons License" style="border-width: 0;margin: .5em auto;" src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png" /> </a> </div> </footer> </main> <script src="/js/typed.min.js"></script> <script> window.onload = function () { new Typed('#motto', { strings: ['起风了，唯有努力生存'], contentType: 'html', typeSpeed: 100, showCursor: false }); } </script> </body> </html></body></html>
